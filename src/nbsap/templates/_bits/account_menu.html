{% load i18n %}
{% load utils %}

{% if '/dashboard' in request.path %}
<nav class="navbar navbar-static-top">
  <h3 class="dashboard-title">{% trans SITE_HEADER %}</h3>
  <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
      <span class="sr-only">Toggle navigation</span>
  </a>
  <div class="navbar-custom-menu">
    <ul class="nav navbar-nav">
      {% if user.is_authenticated and user.is_superuser and LANGUAGES|length > 1 %}
        <li>
          <a href="{% url 'rosetta-home' %}">{% trans 'Translate' %}</a>
        </li>
      {% endif %}
      <li>
        <a href="{% url 'admin:index' %}" class="change-lang admin">{% trans 'Administration' %}</a>
      </li>
      {% for navbar_link in navbar_links %}
        <li>
          <a href="{{ navbar_link.url }}" target="_blank" title="{{ navbar_link.title }}">
            {{ navbar_link }}
          </a>
        </li>
      {% endfor %}
      {% if LANGUAGES|length > 1 %}
        <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown">
            {{ request.LANGUAGE_CODE|upper }}
          </a>
          <ul class="dropdown-menu">
            {% for lang in LANGUAGES %}
              <li>
                <a class="change-lang">{{ lang.1 }}</a>
                <form name="set_lang_{{ lang.0 }}" class="language-menu" action="{% url 'set_language' %}" method="POST">
                  <input name="next" type="hidden" value="{{ request.get_full_path }}">
                  <input name="language" type="hidden" value="{{ lang.0 }}">
                </form>
              </li>
            {% endfor %}
          </ul>
        </li>
      {% else %}
        <li>
            <a href="" title="{{ LANGUAGES.0.1 }}">{{ LANGUAGES.0.0|upper }}</a>
        </li>
      {% endif %}
      {% if user.is_authenticated %}
        <li>
            <a href="{% url 'logout' %}"><i class="glyphicon glyphicon-off"></i></a>
        </li>
      {% else %}
        <li>
          <a href="{% url 'login' %}">{% trans "Login" %}</a>
        </li>
      {% endif %}
    </ul>
  </div>
</nav>
{% else %}
<div class="accountwrapper">
  <div class="account-menu-header" data-click="user">
    <span class="user">
      {% if user.is_authenticated %}
          <a class="account-menu-trigger">  <i class="fa fa-caret-right" id="user-close"></i> {{ user }} </a>
      {% else %}
          <a class="{% active 'login' %}" href="{% url 'login' %}">{% trans "Login" %}</a>
      {% endif %}
    </span>
  </div>
  <ul class="account-menu" data-click="user">
    {% for navbar_link in navbar_links %}
      <li>
          <a href="{{ navbar_link.url }}" target="_blank" title="{{ navbar_link.title }}">{{ navbar_link }}</a>
      </li>
    {% endfor %}
    {% if user.is_authenticated %}
      <li>
        <a href="{% if NAT_STRATEGY %}{% url 'list_national_objectives' %}{% else %}{% url 'list_eu_targets' %}{% endif %}">
          {% trans 'Dashboard' %}
        </a>
      </li>
      {% if user.is_superuser and LANGUAGES|length > 1 %}
        <li>
          <a href="{% url 'rosetta-home' %}">{% trans 'Translate' %}</a>
        </li>
      {% endif %}
      <li>
        <a href="{% url 'logout' %}">
          {% trans "Logout" %}
        </a>
      </li>
    {% endif %}
  </ul>
  {% ifnotequal LANGUAGES|length 1 %}
    <div class="lang-menu-header" data-click="lang">
      <span class="lang">
        <a class="lang-menu-trigger"><i class="fa" id="lang-close"></i>
          {{ request.LANGUAGE_CODE|upper }}
        </a>
      </span>
    </div>
    <ul class="lang-menu" data-click="lang">
      {% for lang in LANGUAGES %}
        <li class="change-lang-wrapper">
          <a class="change-lang">{{ lang.1 }}</a>
          <form name="set_lang_{{ lang.0 }}" class="language-menu" action="{% url 'set_language' %}" method="POST">
            <input name="next" type="hidden" value="{{ request.get_full_path }}">
            <input name="language" type="hidden" value="{{ lang.0 }}">
          </form>
        </li>
      {% endfor %}
    </ul>
  {% endifnotequal %}
</div>
{% endif %}
