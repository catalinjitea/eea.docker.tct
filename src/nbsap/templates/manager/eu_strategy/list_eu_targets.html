{% extends 'manager/base.html' %}

{% load i18n %}
{% load assets %}


{% block title %}
NBSAP - {% trans "EU Strategy: List Targets" %}
{% endblock %}


{% block content %}

{% get_current_language as lang_code %}
<section class="content-header">
  <h1 class="page-title">{% trans "European Strategy" %}</h1>
</section>
<section class="content">
  <h2>{% trans "List EU Targets" %}</h2>

  {% if EU_STRATEGY_ADD %}
  {% url 'edit_eu_target' as edit %}
  {% endif %}


  <table data-url="{{ edit }}" id="target-table" class="table table-striped table-bordered dataTable">

    <thead>
    <th>{% trans "Code" %}</th>
    <th>{% trans "Title" %}</th>
    </thead>

    <tbody>
    {% for target in targets %}
    <tr>
      <td>{{ target.code }}</td>
      <td>
        <a href="{% url 'view_eu_strategy_target' target.id %}"
           title="{% trans 'Target' %} {{ target.code }}">
          {{ target.title|default:target.code }}</a>
      </td>
    </tr>
    {% endfor %}
    </tbody>

  </table>
</section>
{% endblock %}

{% block scripts %}

<script>
  $(function () {
    console.log("{{ edit }}");
    $('#target-table').dataTable({
      "paging": false,
      "dom": '<"filter-wrapper"f>t'
    });
    var url=$('#target-table').data('url');
    $('.filter-wrapper').prepend('{% if EU_STRATEGY_ADD %}<div class="action-bar"><a class="btn btn-success add" href="'+url+'">{% trans "Add target" %}</a></div>{% endif %}');
  });
</script>

{% endblock scripts %}
