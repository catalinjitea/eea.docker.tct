{% extends 'manager/base.html' %}

{% load i18n %}
{% load assets %}


{% block title %}
  NBSAP - {% trans "Mapping EU Targets to Aichi Targets" %}
{% endblock %}


{% block content %}

  <h1 class="page-title">{% trans "Mapping EU Targets to Aichi Targets" %}</h1>

  <div class="action-bar">
    <a class="btn btn-success add"
       href="{% url 'edit_eu_aichi_strategy' %}">{% trans "Add Mapping" %}</a>
  </div>

  <table class="table objectives_listing ">

    <thead>
      <th>{% trans "Eu Targets" %} </th>
      <th>{% trans "Relevant AICHI Targets"%}</th>
      <th>{% trans "Other AICHI Targets"%}</th>
      <th>{% trans "Edit" %}</th>
      <th>{% trans "Delete" %}</th>
      <th>{% trans "Eu Indicators"%}</th>
      <th>{% trans "Other Eu Indicators"%}</th>
    </thead>

    <tbody>
    {% for strategy in strategies %}
      <tr>
        <td class="strategy">
          {% for eu_target in strategy.eu_targets.all %}
            <a href="{% url 'view_eu_strategy_target' pk=eu_target.pk %}">
              {{ eu_target.code }}</a>
          {% endfor %}
        </td>
        <td>
          {{ strategy.aichi_targets.all|join:", " }}
        </td>
        <td>
          {{ strategy.other_aichi_targets.all|join:", " }}
        </td>
        <td style="text-align: center;">
          <a class="btn btn-mini btn-success add"
              href="{% url 'edit_eu_aichi_strategy' strategy.pk %}">{% trans "Edit" %}</a>
        </td>
        <td style="text-align: center;">
          <form method="POST" action="{% url 'delete_eu_aichi_strategy' strategy.pk %}">
            <button type="submit" class="btn btn-mini btn-danger"
                    data-message="{% trans 'Are you sure you want to delete this strategy?' %}">
              {% trans "Delete" %}
            </button>
          </form>
        </td>
        <td>
          {{ strategy.eu_targets.first.get_indicators_short }}
        </td>
        <td>
          {{ strategy.eu_targets.first.get_other_indicators_short }}
        </td>
      </tr>
    {% endfor %}
    </tbody>

  </table>
{% endblock %}


{% block scripts %}

  {% assets "js_admin" %}
     <script type="text/javascript" src="{{ ASSET_URL }}"></script>
  {% endassets %}
  <script src="/static/js/object_delete.js"></script>
{% endblock scripts %}
