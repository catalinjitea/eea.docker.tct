{% extends 'manager/base.html' %}

{% load i18n %}
{% load utils %}

{% block title %}
  NBSAP - {% trans "target" %} {{ target.code }}: {{target.title }}
{% endblock %}


{% block content %}

  {% if messages %}
  <div class="messages alert alert-success">
  {% for message in messages %}
      <p{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</p>
  {% endfor %}
  </div>
  {% endif %}

  <h1 class="page-title">{% trans "Target" %} {{ target.code }}: {{ target.title }}</h1>

    <div class="action-bar">
      <form method="POST" action="{% url 'delete_eu_strategy_target' pk=target.pk %}">
        <a class="btn btn-success" href="{% url 'list_eu_targets' %}">
          <i class="glyphicon glyphicon-arrow-left"></i> {% trans "Back" %}
        </a>

        <a class="btn btn-default"
           href="{% url 'edit_eu_strategy_activity' target=target.pk %}">
          {% trans "Add activity" %}
        </a>

        <a class="btn btn-default"
           href="{% url 'edit_eu_strategy_target' pk=target.pk %}">{% trans "Edit" %}</a>

        <button type="submit" class="btn btn-danger edit"
                data-message="{% trans 'Are you sure you want to delete this target?' %}">
          <i class="glyphicon glyphicon-trash"></i> {% trans "Delete" %}
        </button>
      </form>
    </div>

  <div class="html-content">
    {{ target.description|safe }}
  </div>

  <div class="property_list">
    <table class="table table-striped minimalist">
    
      <thead>
        <th class="span1">{% trans "Code" %}</th>
        <th>{% trans "Activities" %}</th>
      </thead>
    
      <tbody>
      {% if target.actions.all %}
      {% for activity in target.actions.all %}
        <tr>
          <td>{{ activity.code }}</td>
          <td>
            <a href="{% url 'view_eu_strategy_activity' target=target.pk pk=activity.pk %}"
             title="{% trans 'activity' %} {{ activity.code }}">
            {% trans "Activities related to target" %} {{ target.code }}
            </a>
          </td>
        </tr>
      {% endfor %}
      {% else %}
        <tr>
          <td colspan="2">{% trans "No activities found" %}.</td>
        </tr>
      {% endif %}
      </tbody>
    
    </table>
  </div>

{% endblock %}

{% block scripts %}
  <script src="/static/js/object_delete.js"></script>
{% endblock scripts %}
