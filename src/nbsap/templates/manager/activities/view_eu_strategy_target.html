{% extends 'manager/base.html' %}

{% load i18n %}

{% block title %}
  NBSAP - {% trans "Action" %} {{ activity.code }}: {{ activity.title }}
{% endblock %}


{% block content %}

  <h1 class="page-title">{% trans "Action" %} {{ activity.code }}: {{ activity.title }}</h1>

  <div class="action-bar">
    <form method="POST" action="{% url 'delete_eu_strategy_activity' target=target.pk pk=activity.pk %}">
      <a class="btn btn-success"
         href="{% url 'view_eu_strategy_target' pk=target.pk %}">
        <i class="glyphicon glyphicon-arrow-left"></i> {% trans "Back" %}</a>

      <a class="btn btn-default edit"
         href="{% url 'edit_eu_strategy_activity' target=target.pk pk=activity.pk %}">{% trans "Edit" %}</a>

     {% if not activity.parent %}
        <a class="btn btn-default"
           href="{% url 'edit_eu_strategy_activity' target=target.pk parent=activity.pk %}">
           {% trans "Add sub-action" %}</a>
     {% endif %}

      <button type="submit" class="btn btn-danger edit"
              data-message="{% trans 'Are you sure you want to delete this activity?' %}">
        <i class="glyphicon glyphicon-trash"></i> {% trans "Delete" %}
      </button>
    </form>
  </div>

  <div class="admin-obj-description">
    {% if not activity.description %}
      <p class="alert">No description provided</p>
    {% endif %}

    {{ activity.description|safe }}
  </div>

  {% if not activity.parent %}
  <div class="property_list">
    <table class="table table-striped minimalist">

      <thead>
        <th class="span1">{% trans "Code" %}</th>
        <th>{% trans "Sub-actions" %}</th>
      </thead>

      <tbody>
      {% if activity.subactions %}
      {% for action in activity.subactions %}
        <tr>
          <td>{{ action.code }}</td>
          <td>
            <a href="{% url 'view_eu_strategy_activity' target=target.pk pk=action.pk %}"
             title="{% trans 'action' %} {{ action.code }}">
            {% trans "Actions related to target" %} {{ target.code }}
            </a>
          </td>
        </tr>
      {% endfor %}
      {% else %}
        <tr>
          <td colspan="2">{% trans "No sub-actions found" %}.</td>
        </tr>
      {% endif %}
      </tbody>

    </table>
  </div>
  {% endif %}

{% endblock %}

{% block scripts %}
  <script src="/static/js/object_delete.js"></script>
{% endblock scripts %}
